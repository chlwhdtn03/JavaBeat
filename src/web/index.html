<!DOCTYPE html>
<html lang="ko">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src=https://code.jquery.com/jquery-2.x-git.js></script> 
    <script>
        $(
            function () {
                webSocket = new WebSocket("ws://" + location.host + "/JavaBeat");
                webSocket.onopen = function () {
                    webSocket.send("connect");
                };
                webSocket.onclose = function () {
                    alert("JavaBeat : 서버와 연결이 종료되었습니다.")
                };
                webSocket.onmessage = function (b) {
                    var a = JSON.parse(b.data);
                    switch (a.type) {
                        case "singer":
                            $("#singer").text(a.data);
                            break;
                        case "title":
                            $("#title").text(a.data);
                            break;
                        case "album":
                            $("#album").text(a.data);
                            break;
                        case "artwork":
                            $("#image").attr('src', 'data:image/png;base64,' + a.data);
                            break;
                    }
                }
            });
        function nextsong() {
            // var b = $("#" + a + "_text");
            // if (b.val().length > 0) {
            webSocket.send("nextsong");
            //     b.val("")
            // }
        }
        function backsong() {
            // var b = $("#" + a + "_text");
            // if (b.val().length > 0) {
            webSocket.send("backsong");
            //     b.val("")
            // }
        }
    </script>

    <style>
    
    * {
        text-align: center;
    }

    p {
        margin-top: 0px;
    }

    img {
        max-width: 400px;
    }

    button {
        text-decoration: none;
        border: none;
        padding: 5px;
        display: inline-block;
        font-size: 15px;
        margin: 5px;
        color: white;
        background-color: #000000;
        cursor: pointer;
    }
    
    </style>
    <meta charset="UTF-8">
    <title>JavaBeat</title>
</head>

<body>
    <div>
        <figure>
            <img id="image" src="" width=100% height=100% onerror="this.src='Noimg.png'">
            <p><span style="font-size: 1.2rem;" id="title">Title</span><br>
            <span style="color: blue;"><span id="singer">artist</span> - <span id="album">album</span></span></p>
        </figure>
        <button id="back" onclick="backsong()">이전 곡</button>
        <button id="next" onclick="nextsong()">다음 곡</button>
    </div>
</body>

</html>